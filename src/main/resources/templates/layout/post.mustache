<div class="boardModal modal" id="boardModal">
    <!-- Ï§ëÏïôÏóê ÏûëÍ≤å ÌëúÏãúÎêòÎèÑÎ°ù ÏàòÏ†ï -->
    <div class="bmodal-board-modal-content modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="boardModalLabel">Ïù¥Î≤§Ìä∏ Í≥µÏßÄ</h5>
            <button type="button" class="btn-close" id="closeModalBtn" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <!-- Î™®Îã¨ ÎÇ¥Ïö©Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê† Î∂ÄÎ∂Ñ -->
        </div>
    </div>
</div>

<div class="content-box">
    {{#modal.boards}}
        <div class="group-name">{{socialName}}
            <button class="delete-post-button" data-board-id="{{boardId}}">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="post">
            <div class="author-box">
                <img src="{{userImage}}" alt="Profile Picture" class="profile-picture openModalBtn"
                     data-board-id="{{boardId}}">
                <div>
                    <button data-board-id="{{boardId}}" class="book-button {{#book}}bookd{{/book}}">
                        <i class="fas fa-star"></i>
                    </button>
                    <div class="author">{{nickname}}</div>
                    <div class="date">{{createdAt}}</div>
                </div>
            </div>
            <div class="message-box">
                {{#albums}}
                    <div class="media-item">
                        {{#isImage}}
                            <img src="{{path}}" alt="Image"
                                 style="max-width: 100%; max-height: 300px; margin-bottom: 10px;">
                        {{/isImage}}
                        {{#isVideo}}
                            <video controls style="max-width: 100%; max-height: 300px;">
                                <source src="{{path}}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        {{/isVideo}}
                    </div>
                {{/albums}}
                <div class="message openModalBtn" data-board-id="{{boardId}}">
                    {{{content}}}
                </div>
                {{^hashEmpty}}
                    <div class="media-box">
                        <div class="hashtag-box">
                            {{#hashtagList}}
                                <button class="hashtag-btn">{{name}}</button>
                            {{/hashtagList}}
                        </div>
                    </div>
                {{/hashEmpty}}
                <div class="comments">
                    <div class="like-count">üòäüòçÏ¢ãÏïÑÏöî <span class="like-count-value">{{likeCount}}</span></div>
                    <div class="comment-count">üí¨ÎåìÍ∏Ä {{replyCount}}</div>
                </div>
            </div>
        </div>
        <div class="comment-section-container">
            <div class="recent-comment">
                {{#isReply}}
                    <img src="{{replyImage}}" alt="ÎåìÍ∏Ä ÏûëÏÑ±Ïûê ÏÇ¨ÏßÑ" class="comment-picture">
                    <div class="recent-comment-content">
                        <div class="recent-comment-author">{{replyUser}}</div>
                        <div class="recent-comment-text">{{replyComment}}</div>
                        <div class="recent-comment-time">{{replyCreatedAt}}</div>
                    </div>
                {{/isReply}}
            </div>
            <form action="/reply/save" method="post">
                <div class="d-flex">
                    <button type="button" class="like-button {{#liked}}liked{{/liked}}" data-board-id="{{boardId}}">
                        <i class="fas fa-heart"></i>
                    </button>
                    <div class="comment-section">
                        <input type="hidden" name="role" value="1">
                        <input type="hidden" name="socialId" value="{{socialId}}">
                        <input type="hidden" name="boardId" value="{{boardId}}">
                        <img src="{{myProfileImage}}" alt="Commenter Picture" class="comment-picture">
                        <input type="text" name="comment" placeholder="ÎåìÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî.">
                    </div>
                    <div>
                        <button type="submit" class="send-button">Î≥¥ÎÇ¥Í∏∞</button>
                    </div>
                </div>
            </form>
        </div>
    {{/modal.boards}}

    {{#modals.boards}}
        <div class="group-name">{{socialName}}</div>
        <div class="post">
            <div class="author-box">
                <img src="{{userImage}}" alt="Profile Picture" class="profile-picture openModalBtn"
                     data-board-id="{{boardId}}">
                <div>
                    <button data-board-id="{{boardId}}" class="book-button {{#book}}bookd{{/book}}">
                        <i class="fas fa-star"></i>
                    </button>
                    <div class="author">{{nickname}}</div>
                    <div class="date">{{createdAt}}</div>
                </div>
            </div>
            <div class="message-box">
                {{#albums}}
                    <div class="media-item">
                        {{#isImage}}
                            <img src="{{path}}" alt="Image"
                                 style="max-width: 100%; max-height: 300px; margin-bottom: 10px;">
                        {{/isImage}}
                        {{#isVideo}}
                            <video controls style="max-width: 100%; max-height: 300px;">
                                <source src="{{path}}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        {{/isVideo}}
                    </div>
                {{/albums}}
                <div class="message openModalBtn" data-board-id="{{boardId}}">
                    {{{content}}}
                </div>
                {{^hashEmpty}}
                    <div class="media-box">
                        <div class="hashtag-box">
                            {{#hashtagList}}
                                <button class="hashtag-btn">{{name}}</button>
                            {{/hashtagList}}
                        </div>
                    </div>
                {{/hashEmpty}}
                <div class="comments">
                    <div class="like-count">üòäüòçÏ¢ãÏïÑÏöî <span class="like-count-value">{{likeCount}}</span></div>
                    <div class="comment-count">üí¨ÎåìÍ∏Ä {{replyCount}}</div>
                </div>
            </div>
        </div>
        <div class="comment-section-container">
            <div class="recent-comment">
                {{#isReply}}
                    <img src="{{replyImage}}" alt="ÎåìÍ∏Ä ÏûëÏÑ±Ïûê ÏÇ¨ÏßÑ" class="comment-picture">
                    <div class="recent-comment-content">
                        <div class="recent-comment-author">{{replyUser}}</div>
                        <div class="recent-comment-text">{{replyComment}}</div>
                        <div class="recent-comment-time">{{replyCreatedAt}}</div>
                    </div>
                {{/isReply}}
            </div>
            <form action="/reply/save" method="post">
                <div class="d-flex">

                    <button type="button" class="like-button {{#liked}}liked{{/liked}}" data-board-id="{{boardId}}">
                        <i class="fas fa-heart"></i>
                    </button>

                    <div class="comment-section">
                        <input type="hidden" name="role" value="2">
                        <input type="hidden" name="socialId" value="{{socialId}}">
                        <input type="hidden" name="boardId" value="{{boardId}}">
                        <img src="{{myProfileImage}}" alt="Commenter Picture" class="comment-picture">
                        <input type="text" name="comment" placeholder="ÎåìÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî.">
                    </div>
                    <div>
                        <button type="submit" class="send-button">Î≥¥ÎÇ¥Í∏∞</button>
                    </div>
                </div>
            </form>
        </div>
    {{/modals.boards}}

    {{#myBoardModel.myBoardList}}
        <div class="group-name">{{socialName}}</div>
        <div class="post">
            <div class="author-box">
                <img src="{{userImage}}" alt="Profile Picture" class="profile-picture openModalBtn"
                     data-board-id="{{boardId}}">
                <div>
                    <button data-board-id="{{boardId}}" class="book-button {{#book}}bookd{{/book}}">
                        <i class="fas fa-star"></i>
                    </button>
                    <div class="author">{{nickname}}</div>
                    <div class="date">{{createdAt}}</div>
                </div>
            </div>
            <div class="message-box">
                {{#albums}}
                    <div class="media-item">
                        {{#isImage}}
                            <img src="{{path}}" alt="Image"
                                 style="max-width: 100%; max-height: 300px; margin-bottom: 10px;">
                        {{/isImage}}
                        {{#isVideo}}
                            <div class="video-container">
                                <video id="video-{{boardId}}" class="video-js vjs-default-skin" controls preload="auto" width="100%" height="300">
                                    <source src="/hls/video_{{boardId}}.m3u8" type="application/x-mpegURL">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                        {{/isVideo}}
                    </div>
                {{/albums}}
                <div class="message openModalBtn" data-board-id="{{boardId}}">
                    {{{content}}}
                </div>
                {{^hashEmpty}}
                    <div class="media-box">
                        <div class="hashtag-box">
                            {{#hashtagList}}
                                <button class="hashtag-btn">{{name}}</button>
                            {{/hashtagList}}
                        </div>
                    </div>
                {{/hashEmpty}}
                <div class="comments">
                    <div class="like-count">üòäüòçÏ¢ãÏïÑÏöî <span class="like-count-value">{{likeCount}}</span></div>
                    <div class="comment-count">üí¨ÎåìÍ∏Ä {{replyCount}}</div>
                </div>
            </div>
        </div>
        <div class="comment-section-container">
            <div class="recent-comment">
                {{#isReply}}
                    <img src="{{replyImage}}" alt="ÎåìÍ∏Ä ÏûëÏÑ±Ïûê ÏÇ¨ÏßÑ" class="comment-picture">
                    <div class="recent-comment-content">
                        <div class="recent-comment-author">{{replyUser}}</div>
                        <div class="recent-comment-text">{{replyComment}}</div>
                        <div class="recent-comment-time">{{replyCreatedAt}}</div>
                    </div>
                {{/isReply}}
            </div>
            <form action="/reply/save" method="post">
                <div class="d-flex">
                    <button type="button" class="like-button {{#liked}}liked{{/liked}}" data-board-id="{{boardId}}">
                        <i class="fas fa-heart"></i>
                    </button>
                    <div class="comment-section">
                        <input type="hidden" name="role" value="3">
                        <input type="hidden" name="socialId" value="{{socialId}}">
                        <input type="hidden" name="boardId" value="{{boardId}}">
                        <img src="{{myProfileImage}}" alt="Commenter Picture" class="comment-picture">
                        <input type="text" name="comment" placeholder="ÎåìÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî.">
                    </div>
                    <div>
                        <button type="submit" class="send-button">Î≥¥ÎÇ¥Í∏∞</button>
                    </div>

                </div>
            </form>
        </div>
    {{/myBoardModel.myBoardList}}
</div>

<!-- HLS ÎπÑÎîîÏò§ Ïª§ÎÑ•ÌÑ∞ -->
<link href="https://vjs.zencdn.net/7.10.2/video-js.min.css" rel="stylesheet">
<script src="https://vjs.zencdn.net/7.10.2/video.min.js"></script>

<script>


    $(document).ready(function () {
        let modal = $("#boardModal");

        // Ï¢ãÏïÑÏöî Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $('.bmodal-like-icon').on('click', function () {
            var likeCount = $(this).siblings('.bmodal-like-count');
            var count = parseInt(likeCount.text());
            if ($(this).hasClass('far')) {
                $(this).removeClass('far').addClass('fas');
                likeCount.text(count + 1);
            } else {
                $(this).removeClass('fas').addClass('far');
                likeCount.text(count - 1);
            }
        });

        // ÎåìÍ∏Ä ÏÇ≠Ï†ú Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $(document).on('click', '.delete-comment-button', function () {
            var $comment = $(this).closest('.bmodal-board-comment, .bmodal-reply');
            var commentId = $comment.data('comment-id'); // ÎåìÍ∏Ä ID Í∞ÄÏ†∏Ïò§Í∏∞

            // ÏÑúÎ≤ÑÏóê ÏÇ≠Ï†ú ÏöîÏ≤≠
            $.ajax({
                type: 'DELETE',
                url: '/comment/delete?commentId=' + commentId, // URL Îß§Í∞úÎ≥ÄÏàòÎ°ú commentId Ï†ÑÏÜ°
                success: function (response) {
                    if (response.success) {
                        // ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÎ©¥ ÎåìÍ∏ÄÏùÑ UIÏóêÏÑú Ï†úÍ±∞
                        $comment.remove();
                    } else {
                        console.error('Error:', response.message);
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                }
            });
        });

        // Ï¢ãÏïÑÏöî Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $(document).on('click', '.like-button', function () {
            var $this = $(this);
            var boardId = $this.data('board-id');
            var isLiked = $this.hasClass('liked');
            var method = isLiked ? 'DELETE' : 'POST';
            var url = isLiked ? '/like/delete' : '/like/save';

            // Ï¶âÏãú UI ÏóÖÎç∞Ïù¥Ìä∏
            $this.toggleClass('liked');
            $this.find('.fa-heart').css('color', isLiked ? '#aaaaaa' : 'red');

            // ÏÑúÎ≤ÑÏóê ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠
            $.ajax({
                type: method,
                url: url + '?boardId=' + boardId, // URL Îß§Í∞úÎ≥ÄÏàòÎ°ú boardId Ï†ÑÏÜ°
                success: function (response) {
                    if (!response.success) {
                        // ÏÑúÎ≤Ñ ÏöîÏ≤≠Ïù¥ Ïã§Ìå®ÌïòÎ©¥ UIÎ•º Îã§Ïãú ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎèåÎ¶º
                        $this.toggleClass('liked');
                        $this.find('.fa-heart').css('color', isLiked ? 'red' : '#aaaaaa');
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                    // ÏóêÎü¨Í∞Ä Î∞úÏÉùÌïòÎ©¥ UIÎ•º Îã§Ïãú ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎèåÎ¶º
                    $this.toggleClass('liked');
                    $this.find('.fa-heart').css('color', isLiked ? 'red' : '#aaaaaa');
                }
            });
        });

        // Î∂ÅÎßàÌÅ¨ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        $(document).on('click', '.book-button', function () {
            var $this = $(this);
            var boardId = $this.data('board-id');
            var isBooked = $this.hasClass('book');
            var method = isBooked ? 'DELETE' : 'POST';
            var url = isBooked ? '/bookmark/delete' : '/bookmark/save';

            // Ï¶âÏãú UI ÏóÖÎç∞Ïù¥Ìä∏
            $this.toggleClass('book');
            $this.find('.fa-star').css('color', isBooked ? '#aaaaaa' : 'yellow');

            // ÏÑúÎ≤ÑÏóê ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ ÏöîÏ≤≠
            $.ajax({
                type: method,
                url: url + '?boardId=' + boardId, // URL Îß§Í∞úÎ≥ÄÏàòÎ°ú boardId Ï†ÑÏÜ°
                success: function (response) {
                    if (!response.success) {
                        // ÏÑúÎ≤Ñ ÏöîÏ≤≠Ïù¥ Ïã§Ìå®ÌïòÎ©¥ UIÎ•º Îã§Ïãú ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎèåÎ¶º
                        $this.toggleClass('book');
                        $this.find('.fa-star').css('color', isBooked ? 'yellow' : '#aaaaaa');
                    } else {
                        // // ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î∂ÅÎßàÌÅ¨ ÏÉÅÌÉúÍ∞Ä ÏóÖÎç∞Ïù¥Ìä∏Îêú Í≤ΩÏö∞, ÌéòÏù¥ÏßÄ Î¶¨Î°úÎìú
                        // if (isBooked) {
                        //     location.reload(); // Î∂ÅÎßàÌÅ¨ ÏÇ≠Ï†ú ÏãúÏóêÎßå ÌéòÏù¥ÏßÄ Î¶¨Î°úÎìú
                        // }
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                    // ÏóêÎü¨Í∞Ä Î∞úÏÉùÌïòÎ©¥ UIÎ•º Îã§Ïãú ÏõêÎûò ÏÉÅÌÉúÎ°ú ÎèåÎ¶º
                    $this.toggleClass('book');
                    $this.find('.fa-star').css('color', isBooked ? 'yellow' : '#aaaaaa');
                }
            });
        });

        // HLS ÎπÑÎîîÏò§ Ïª§ÎÑ•ÌÑ∞
        // ÎπÑÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Ï¥àÍ∏∞Ìôî Ìï®Ïàò
        function initializeVideoPlayers() {
            $('.video-js').each(function() {
                var player = videojs(this.id);
                player.ready(function() {
                    this.on('play', function() {
                        // ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïãú HLS Î≥ÄÌôò ÏÉÅÌÉú ÌôïÏù∏
                        var boardId = this.id().split('-')[1];
                        checkHlsStatus(boardId, this);
                    });
                });
            });
        }

        // HLS Î≥ÄÌôò ÏÉÅÌÉú ÌôïÏù∏ Ìï®Ïàò
        function checkHlsStatus(boardId, player) {
            $.ajax({
                url: '/album/hls-status/' + boardId,
                method: 'GET',
                success: function(response) {
                    if (!response['HLS Î≥ÄÌôò ÏôÑÎ£å']) {
                        // HLS Î≥ÄÌôòÏù¥ ÏôÑÎ£åÎêòÏßÄ ÏïäÏïòÎã§Î©¥ Î≥ÄÌôò ÏöîÏ≤≠
                        convertToHls(boardId, player);
                    }
                },
                error: function(xhr, status, error) {
                    console.error("HLS ÏÉÅÌÉú ÌôïÏù∏ Ïò§Î•ò:", error);
                }
            });
        }

        // HLS Î≥ÄÌôò ÏöîÏ≤≠ Ìï®Ïàò
        function convertToHls(boardId, player) {
            $.ajax({
                url: '/convert/' + boardId,
                method: 'GET',
                success: function(response) {
                    console.log("HLS Î≥ÄÌôò ÏöîÏ≤≠ ÏÑ±Í≥µ");
                    // Î≥ÄÌôò ÏôÑÎ£å ÌõÑ ÎπÑÎîîÏò§ ÏÜåÏä§ ÏóÖÎç∞Ïù¥Ìä∏
                    player.src({ type: "application/x-mpegURL", src: "/hls/video_" + boardId + ".m3u8" });
                    player.play();
                },
                error: function(xhr, status, error) {
                    console.error("HLS Î≥ÄÌôò ÏöîÏ≤≠ Ïò§Î•ò:", error);
                }
            });
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÎπÑÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Ï¥àÍ∏∞Ìôî
        initializeVideoPlayers();

        // Î™®Îã¨ ÏºúÎäî Í∏∞Îä•
        $(document).on('click', '.openModalBtn', function () {
            console.log("Î≤ÑÌäº ÎàåÎ¶º");
            let boardId = $(this).data('board-id');
            console.log("Î≥¥Îìú:", boardId, "ÏÜåÏÖú:", socialId);
            $.ajax({
                url: '/board/detail/',
                method: 'GET',
                data: {boardId: boardId, socialId: socialId},// RequestParamÏúºÎ°ú boardId Ï†ÑÏÜ°
                dataType: 'json',
                success: function (data) {
                    var detail = data;
                    var hashtagList = detail.hashtagList || []; // hashtagListÍ∞Ä ÏóÜÏúºÎ©¥ Îπà Î∞∞Ïó¥ ÏÇ¨Ïö©
                    var replyList = detail.replyList || []; // replyListÍ∞Ä ÏóÜÏúºÎ©¥ Îπà Î∞∞Ïó¥ ÏÇ¨Ïö©

                    var modalBodyHtml = `
               <div class="bmodal-user-info">
                    <img src="${detail.userImage}" alt="User Image" class="rounded-circle bmodal-user-image">
                    <div class="bmodal-user-details">
                        <strong>${detail.nickname}</strong>
                        <p class="bmodal-date">${detail.createdAt}</p>
                    </div>
                </div>
                <p>${detail.content}</p>
                <div class="bmodal-hashtags">
                    ${hashtagList.map(hashtag => `<span class="bmodal-hashtag">${hashtag.name}</span>`).join('')}
                </div>
                <div class="bmodal-board-actions">
                    <div class="bmodal-likes-comments">
                        <i class="far fa-heart bmodal-like-icon"></i>
                        <span>Ï¢ãÏïÑÏöî</span>
                        <span class="bmodal-like-count">${detail.likeCount}</span>
                    </div>
                    <div class="bmodal-likes-comments">
                        <i class="fas fa-comment bmodal-comment-icon"></i>
                        <span>ÎåìÍ∏ÄÏì∞Í∏∞</span>
                        <span class="bmodal-comment-count">${detail.replyCount}</span>
                    </div>
                </div>
                <div class="bmodal-board-comment-section">
    ${replyList.map(reply => `
        <div class="bmodal-board-comment" data-comment-id="${reply.id}">
            <div class="comment-wrapper">
                <div class="comment-content">
                    <img src="${reply.userImage}" alt="Profile Picture" class="comment-profile-image">
                    <div class="comment-details">
                        <strong>${reply.nickname}</strong>
                        <p>${reply.content}</p>
                        <div class="comment-meta">
                            <span class="comment-time">${reply.createdAt}</span>
                            <button class="reply-button">ÎãµÍ∏ÄÏì∞Í∏∞</button>
                        </div>
                    </div>
                    <button class="delete-comment-button" data-comment-id="${reply.id}">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
                 <form action="/rereply/save" method="post">
                    <div class="reply-input-container">

                        <input type="hidden" name="boardId" value="${boardId}">
                        <input type="hidden" name="socialId" value="${reply.socialId}">

                        <input type="hidden" name="parentCommentId" value="${reply.id}">
                        <input type="text" name="replyContent" class="reply-input" placeholder="ÎãµÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.">
                        <button type="submit" class="send-reply-button">Î≥¥ÎÇ¥Í∏∞</button>
                    </div>
                </form>
            </div>
            <div class="bmodal-reply-section">
                ${reply.rereplyList.map(rereply => `
                    <div class="bmodal-board-comment bmodal-reply" data-comment-id="${rereply.id}">
                        <div class="comment-wrapper">
                            <div class="comment-content">
                                <img src="${rereply.userImage}" alt="Profile Picture" class="reply-profile-image">
                                <div class="comment-details">
                                    <strong>${rereply.nickname}</strong>
                                    <p>${rereply.content}</p>
                                    <div class="comment-meta">
                                        <span class="comment-time">${rereply.createdAt}</span>
                                        <button class="reply-button">ÎãµÍ∏ÄÏì∞Í∏∞</button>
                                    </div>
                                </div>
                                            <button class="delete-comment-button" data-comment-id="${rereply.id}">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        </div>
                                    <form action="/rereply/save" method="post">
                                      <div class="reply-input-container">
                               <input type="hidden" name="replyId" value="${rereply.replyId}">
                                <input type="hidden" name="boardId" value="${rereply.boardId}">
                                    <input type="hidden" name="parentCommentId" value="${reply.id}">
                                    <input type="text" name="rereplyContent" class="reply-input" placeholder="ÎãµÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî.">
                                    <button type="submit" class="send-reply-button">Î≥¥ÎÇ¥Í∏∞</button>
                                </div>
                            </div>
                        </form>
                    </div>
                `).join('')}
            </div>
        </div>
    `).join('')}
</div>
            `;
                    $('#boardModal .modal-body').html(modalBodyHtml);
                    $('#boardModal').css('display', 'block'); // Î™®Îã¨ÏùÑ ÌôîÎ©¥Ïóê ÌëúÏãú
                },
                error: function (xhr, status, error) {
                    console.error("AJAX Ïò§Î•ò:", error);
                }
            });
        });

        // Î™®Îã¨ Îã´Í∏∞ Í∏∞Îä•
        $('#closeModalBtn').on('click', function () {
            modal.css('display', 'none'); // Î™®Îã¨ÏùÑ ÌôîÎ©¥ÏóêÏÑú Ïà®ÍπÄ
        });

        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
        $(window).on('click', function (event) {
            if (event.target === modal[0]) {
                modal.css('display', 'none'); // Î™®Îã¨ÏùÑ ÌôîÎ©¥ÏóêÏÑú Ïà®ÍπÄ
            }
        });
    });


    // ÎãµÍ∏Ä Ïì∞Í∏∞ ÌÜ†Í∏Ä Í∏∞Îä•
    $(document).on('click', '.reply-button', function () {
        const replyContainer = $(this).closest('.comment-wrapper').find('.reply-input-container').first();
        if (replyContainer) {
            replyContainer.toggle(); // ÏûÖÎ†•Ï∞ΩÏùò display ÏÜçÏÑ±ÏùÑ ÌÜ†Í∏Ä
        }
    });


</script>