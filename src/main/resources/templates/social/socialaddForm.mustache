{{> layout/header}}

<style>
    .socialadd-text-gray-border {
        display: inline-block;
        border: 1px solid #ccc;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
    }

    .socialadd-text-gray-border:hover {
        background-color: #f0f0f0;
    }
</style>

<div class="socialadd-container socialadd-flex-container socialadd-center-content socialadd-column-direction">
    <form id="socialForm" action="/social/create" method="post" enctype="multipart/form-data">
        <div class="socialadd-form-section">
            <div class="socialadd-form-title">소셜 이름</div>
            <input name="name" type="text" id="socialNameInput" class="socialadd-form-input">
        </div>
        <div class="socialadd-form-title">카테고리</div>
        <div class="socialadd-form-section">
            <div class="socialadd-input-group socialadd-flex-container socialadd-align-center">
                <div id="subject"
                     class="socialadd-form-section socialadd-input-group socialadd-flex-container socialadd-align-center">
                    <input type="text" id="customHashtagInput" placeholder="새로운 해시태그 입력" class="socialadd-form-input">
                    <button type="button" id="addCustomHashtagButton" class="socialadd-button socialadd-button-border">추가</button>
                </div>
                <div class="socialadd-hashtag-group" id="hashtagContainer">
                </div>
            </div>
        </div>
        <div class="socialadd-form-title">소셜 메인 커버</div>
        <div class="socialadd-flex-container socialadd-align-center">
            <div class="socialadd-selected-cover-container">
                <img class="socialadd-selected-cover" id="socialCoverPreview" src="" alt="#">
                <input name="image" type="file" id="socialCoverInput" accept="image/*" style="display: none;">
                <label for="socialCoverInput" class="socialadd-cover-upload-label">
                    <i class="fas fa-camera socialadd-text-gray"></i>
                    <div class="socialadd-text-gray socialadd-text-gray-border">사진 추가</div>
                </label>
            </div>
        </div>
        <div class="socialadd-form-section socialadd-margin-top-section">
            <div class="socialadd-form-title">소개글</div>
            <textarea name="info" id="description" rows="4" class="socialadd-form-input socialadd-border-style"
                      vocab="소개글 입력"></textarea>
        </div>
        <div class="socialadd-form-section socialadd-button-group socialadd-margin-top-large">
            <button type="submit" class="socialadd-submit-button">소셜 생성하기</button>
        </div>
    </form>
</div>

<script>
    // 사진 추가 기능 및 미리보기
    const socialCoverInput = document.getElementById('socialCoverInput');
    const socialCoverPreview = document.getElementById('socialCoverPreview');

    socialCoverInput.addEventListener('change', function () {
        const file = this.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                socialCoverPreview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });

    // 해시태그 추가 기능
    document.getElementById('addCustomHashtagButton').addEventListener('click', function () {
        const customHashtagInput = document.getElementById('customHashtagInput');
        const hashtagContainer = document.getElementById('hashtagContainer');
        const hashtagText = customHashtagInput.value.trim();

        if (hashtagText !== '') {
            const hashtag = document.createElement('div');
            hashtag.className = 'socialadd-border-style socialadd-rounded-pill-style socialadd-padding-x socialadd-padding-y socialadd-border-dark-style socialadd-hashtag';
            hashtag.innerHTML = `<span class="socialadd-hashtag-text"># ${hashtagText}</span>
                                 <input type="hidden" name="categories[]" value="${hashtagText}">`;

            hashtag.addEventListener('click', function () {
                hashtagContainer.removeChild(hashtag);
            });

            hashtagContainer.appendChild(hashtag);
            customHashtagInput.value = '';
        }
    });

    // 초기 해시태그 수 업데이트
    function updateHashtagCount() {
        const selectedHashtags = document.querySelectorAll('.socialadd-hashtag-list .socialadd-hashtag.selected').length;
        document.getElementById('hashtagCount').innerText = selectedHashtags;
    }

    updateHashtagCount();
</script>

{{> layout/footer}}
